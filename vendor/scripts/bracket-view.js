(function(){"use strict";var e=typeof window!="undefined"?window:global;if(typeof e.require=="function")return;var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i===".."?n.pop():i!=="."&&i!==""&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(n){var r=s(t),o=i(r,n);return e.require(o)}},u=function(e,t){var r={id:e,exports:{}};t(r.exports,o(e),r);var i=n[e]=r.exports;return i},a=function(e){var s=i(e,".");if(r(n,s))return n[s];if(r(t,s))return u(s,t[s]);var o=i(s,"./index");if(r(n,o))return n[o];if(r(t,o))return u(o,t[o]);throw new Error('Cannot find module "'+e+'"')},f=function(e,n){if(typeof e=="object")for(var i in e)r(e,i)&&(t[i]=e[i]);else t[e]=n};e.require=a,e.require.define=f,e.require.register=f,e.require.brunch=!0})(),window.require.register("collections/brackets/games",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/collection"),i=t("models/brackets/game"),n.exports=s=function(e){function t(){return this.parse=o(this.parse,this),this.next=o(this.next,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.comparator=function(e){return e.get("number")},t.prototype.next=function(e){var t,n;e==null&&(e=null),t=this.find(function(e){return e.get("status")==="active"}),n=this.find(function(e){return e.get("status")==="ready"}),t!=null&&t.set("status","finished"),n!=null&&n.set("status","active");if(e!=null)return t.set("winner",_.pick(e.attributes,"id","name"))},t.prototype.parse=function(e){var t,n,r,s;n=[];for(t=r=0,s=e.length;0<=s?r<s:r>s;t=0<=s?++r:--r)this.at(t)!=null?(n[t]=this.at(t),n[t].set(e[t])):n[t]=new i(e[t]);return n},t}(r)}),window.require.register("collections/brackets/group-stages",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/collection"),i=t("models/brackets/group-stage"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.model=i,t}(r)}),window.require.register("collections/brackets/matches",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/collection"),i=t("models/brackets/match"),n.exports=s=function(e){function t(){return this.parse=o(this.parse,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e)},t.prototype.parse=function(e){var t,n,r,s,o,u,a,f,l,c,h;f=[];for(l=0,c=e.length;l<c;l++)o=e[l],s=this.get(o.id),s!=null?(s.set(_.omit(s.parse(o),"event")),f.push(s)):(a=new i,a.set(a.parse(o)),f.push(a));for(r in f)o=f[r],f[o.get("parent")]!=null?f[r].set("parent",f[o.get("parent")]):o.set("parent",null),f[(h=o.get("loserDropsTo"))!=null?h.match:void 0]!=null?o.set("loserDropsTo",{match:f[o.get("loserDropsTo").match],slot:o.get("loserDropsTo").slot}):o.set("loserDropsTo",null),u=function(){var e,r;e=o.get("children"),r=[];for(n in e)t=e[n],f[t]!=null?r.push(f[t]):r.push(null);return r}(),f[r].set("children",u);return f},t}(r)}),window.require.register("collections/brackets/streams",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/collection"),i=t("models/brackets/stream"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.model=i,t.prototype.comparator=function(e){return e.get("name")},t}(r)}),window.require.register("collections/brackets/teams",function(e,t,n){var r,i,s,o={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var n in t)o.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/collection"),i=t("models/brackets/team"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.model=i,t}(r)}),window.require.register("models/brackets/bracket",function(e,t,n){var r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("models/base/model"),s=t("collections/brackets/matches"),u=t("collections/brackets/teams"),i=t("collections/brackets/group-stages"),n.exports=r=function(e){function t(){return this.parse=a(this.parse,this),t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.defaults=function(){return{users:[],sessionId:null,title:"Your Title",date:moment().format("YYYY-MM-DDTHH:mm:ssZ"),slug:"default-slug",kind:"ipl6",labels:[],matches:new s,groups:new i,teams:new u}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e)},t.prototype.parse=function(e){var t;return this.get("teams").update(e.teams),this.get("teams").trigger("sync"),e.teams=this.get("teams"),t=this.get("matches"),t.update(e.matches,{parse:!0}),e.groups=this.get("groups"),e.matches=t,e},t}(o)}),window.require.register("models/brackets/event",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("models/base/model"),i=t("models/brackets/matchup"),n.exports=r=function(e){function t(){return this.autoTitle=o(this.autoTitle,this),this.toJSON=o(this.toJSON,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.defaults=function(){return{title:"TBD vs. TBD",stream:null,starts_at:moment().add("days",10).format("MM/DD/YYYY hh:mm aZ"),ends_at:moment().add("days",10).add("hours",1).format("YYYY-MM-DDTHH:mm:ssZ"),rebroadcast:!1,matchup:new i,groups:[{id:"5100451909f67b42a8000002",name:"StarCraft II",slug:"starcraft-2",image_url:"http://media.ign.com/ev/esports/ipl-static/shared/images/logos/franchises/starcraft-2.png"}]}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e),this.urlRoot=function(){return"http://esports.ign.com/content/v2/events"}},t.prototype.toJSON=function(){var e;return e=_.clone(this.attributes),e.starts_at=moment(e.starts_at,"MM/DD/YYYY hh:mm a").format("YYYY-MM-DDTHH:mm:ssZ"),e},t.prototype.parse=function(e){return e.matchup=this.get("matchup").parse(e.matchup),e.starts_at=moment(e.starts_at,"YYYY-MM-DDTHH:mm:ssZ").format("MM/DD/YYYY hh:mm aZ"),this},t.prototype.autoTitle=function(){var e,t;return t=function(){var t,n;n=[];for(e=t=0;t<2;e=++t)this.get("matchup").get("teams")[e]!=null?n.push(this.get("matchup").get("teams")[e].get("name")):n.push("TBD");return n}.call(this),this.set("title",t.join(" vs. "))},t}(s)}),window.require.register("models/brackets/game",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("models/base/model"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.defaults=function(){return{number:0,status:"ready"}},t.prototype.endWithWinner=function(e){return this.set("winner",{id:e.id,name:e.get("name")}),this.set("status","done")},t.prototype.start=function(){return this.set("status","active")},t}(i)}),window.require.register("models/brackets/group-stage",function(e,t,n){var r,i,s,o,u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("models/base/model"),i=t("collections/brackets/matches"),o=t("collections/brackets/teams"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.defaults=function(){return{title:"Group",teams:new o,matches:new i,teamWL:{},advanceTo:[],finished:!1,transform2d:{x:0,y:0,paddingX:0,paddingY:0}}},t}(s)}),window.require.register("models/brackets/match-team",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("models/base/model"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.defaults=function(){return{name:"TBD",points:0,seed:0}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e),this.set("points",0)},t}(i)}),window.require.register("models/brackets/match",function(e,t,n){var r,i,s,o,u=function(e,t){return function(){return e.apply(t,arguments)}},a={}.hasOwnProperty,f=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("models/base/model"),r=t("models/brackets/event"),s=t("models/brackets/match-team"),n.exports=i=function(e){function t(){return this.games=u(this.games,this),this.event=u(this.event,this),this.matchup=u(this.matchup,this),this.team=u(this.team,this),this.teams=u(this.teams,this),this.isLoser=u(this.isLoser,this),this.advance=u(this.advance,this),this.toJSON=u(this.toJSON,this),t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.defaults=function(){return{parent:null,children:[],loserDropsTo:null,hasLoserSlot:!1,event:new r,transform2d:{x:0,y:0,paddingX:0,paddingY:0}}},t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e)},t.prototype.parse=function(e){return e.event=this.get("event").parse(e.event),e},t.prototype.toJSON=function(){var e,t;return e=_.clone(this.attributes),e.id="mid"+_.indexOf(this.collection.models,this),e.parent=e.parent!=null?_.indexOf(this.collection.models,e.parent):null,e.children=function(){var n,r,i;i=[];for(t=n=0,r=e.children.length;0<=r?n<r:n>r;t=0<=r?++n:--n)e.children[t]!=null?i.push(_.indexOf(this.collection.models,e.children[t])):i.push(null);return i}.call(this),e.loserDropsTo!=null?e.loserDropsTo.match=_.indexOf(this.collection.models,e.loserDropsTo.match):e.loserDropsTo=null,this.set("id",e.id),e},t.prototype.advance=function(e){var t,n,r;r=this.get("parent"),r!=null&&(r.team(r.whichSlot(this),new s(e.attributes)),r.event().autoTitle()),n=this.get("loserDropsTo");if(n!=null)return t=this.teams()[0].get("name")===e.get("name")?this.teams()[1]:this.teams()[0],n.match.team(n.slot,new s(t.attributes)),n.match.event().autoTitle()},t.prototype.whichSlot=function(e){return _.contains(this.get("children"),e)?this.get("hasLoserSlot")||this.get("children").length===1?1:_.indexOf(this.get("children"),e):0},t.prototype.isLoser=function(){return this.get("hasLoserSlot")?!0:!1},t.prototype.teams=function(e){return e!=null&&this.get("event").get("matchup").set("teams",e),this.get("event").get("matchup").get("teams")},t.prototype.team=function(e,t){return t==null&&(t=null),t!=null&&(this.teams()[e]=t,this.matchup().trigger("change:teams")),this.teams()[e]},t.prototype.matchup=function(){return this.get("event").get("matchup")},t.prototype.event=function(){return this.get("event")},t.prototype.games=function(){return this.matchup().get("games")},t}(o)}),window.require.register("models/brackets/matchup",function(e,t,n){var r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};u=t("models/base/model"),r=t("models/brackets/game"),i=t("collections/brackets/games"),s=t("models/brackets/match-team"),n.exports=o=function(e){function t(){return this.reset=a(this.reset,this),this.pointFor=a(this.pointFor,this),this.updateGamesCount=a(this.updateGamesCount,this),t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.defaults=function(){return{teams:[],games:new i,best_of:3}},t.prototype.initialize=function(e){var n=this;return t.__super__.initialize.call(this,e),this.updateGamesCount(),this.on("change:best_of",function(){return n.updateGamesCount()})},t.prototype.parse=function(e){var t,n,r,i;return r=function(){var r,o;r=e.teams,o=[];for(t in r)i=r[t],n=this.get("teams"),n[t]!=null?o.push(n[t].set(i)):(n[t]=new s(i),o.push(n[t].set("points",i.points)));return o}.call(this),e.games=this.get("games").update(e.games,{parse:!0}),this},t.prototype.updateGamesCount=function(){var e,t,n;return e=this.get("best_of"),t=function(){var t,i;i=[];for(n=t=0;0<=e?t<e:t>e;n=0<=e?++t:--t)i.push(new r({number:n+1}));return i}(),this.get("games").reset(t)},t.prototype.pointFor=function(e){var t,n,r,i;i=this.get("teams");for(n=0,r=i.length;n<r;n++){t=i[n];if(t.get("name")!==e)continue;return t.set("points",t.get("points")+1),t.get("points")>this.get("best_of")/2?{winner:t,matchDecided:!0}:{winner:t,matchDecided:!1}}},t.prototype.reset=function(){return this.get("games").each(function(e){return e.unset("winner"),e.set("status","ready")}),_.each(this.get("teams"),function(e){return e.set("points",0)})},t}(u)}),window.require.register("models/brackets/stream",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/model"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t}(r)}),window.require.register("models/brackets/team",function(e,t,n){var r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("models/base/model"),n.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return o(t,e),t.prototype.defaults=function(){return{name:"TBD",image_url:""}},t}(r)}),window.require.register("utility/brackets/bracket-padding",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.padding={top:100,right:100,bottom:100,left:100},e.match={width:180,height:44},e.matches=null,e.groups=null,e.setBracket=function(e,t){return this.$view=t,this.matches=e.get("matches"),this.groups=e.get("groups"),this},e.addPadding=function(e){var t,n;if(this.matches==null)return!1;for(t in e)n=e[t],this.padding[t]!=null&&(this.padding[t]+=parseInt(n));return this.updateBounds(),this},e.setPadding=function(e){var t,n;if(this.matches==null)return!1;for(t in e)n=e[t],this.padding[t]!=null&&(this.padding[t]=parseInt(n));return this.updateBounds(),this},e.moveMatches=function(e,t){var n=this;return t==null&&(t=0),this.matches==null?!1:(this.matches.each(function(n){var r;return r=_.clone(n.get("transform2d")),r.x+=e,r.y+=t,n.set("transform2d",r)}),this.updateBounds(),this)},e.updateBounds=function(){var e,t,n,r,i,s,o,u,a,f=this;this.groups.each(function(e){var t;return t=_.clone(e.get("transform2d")),t.paddingX=f.padding.left,t.paddingY=f.padding.top,e.set("transform2d",t)}),this.matches.each(function(e){var t;return t=_.clone(e.get("transform2d")),t.paddingX=f.padding.left,t.paddingY=f.padding.top,e.set("transform2d",t)}),t=n=0,u=this.matches.models;for(r=0,s=u.length;r<s;r++)e=u[r],e.get("transform2d").x+e.get("transform2d").paddingX>t&&(t=e.get("transform2d").x+e.get("transform2d").paddingX);a=this.matches.models;for(i=0,o=a.length;i<o;i++)e=a[i],e.get("transform2d").y+e.get("transform2d").paddingY>n&&(n=e.get("transform2d").y+e.get("transform2d").paddingY);return this.$view.css({width:t+this.padding.right+this.match.width,height:n+this.padding.bottom})},e}()}),window.require.register("utility/brackets/flatten-tree",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.flatten=function(e,t){var n,r,i,s;t==null&&(t=[]),t.push(e),s=e.get("children");for(r=0,i=s.length;r<i;r++)n=s[r],this.flatten(n,t);return t},e}()}),window.require.register("utility/brackets/match-connector",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.connect=function(e,t){var n,r,i,s,o,u,a,f,l,c;o=this.findView(e,t),n=$('<div class="match-connector"></div>'),a=u=Math.min(Infinity),s=0,c=e.get("children");for(f=0,l=c.length;f<l;f++)r=c[f],i=this.findView(r,t),i!=null&&(a=Math.min(i.$el.position().top,a),u=Math.min(i.$el.position().left+i.$el.outerWidth(),u),s=Math.max(i.$el.position().top,s)),!0;return s-a>0?(n.css({top:a+o.$el.outerHeight()/2,left:u,width:o.$el.position().left-u,height:s-a}),$('<div class="top-bracket">').appendTo(n),$('<div class="top-line">').appendTo(n),$('<div class="bottom-bracket">').appendTo(n),$('<div class="bottom-line">').appendTo(n)):(n.css({top:o.$el.position().top,left:u,width:o.$el.position().left-u,height:o.$el.outerHeight()}),$('<div class="top-line full-width">').appendTo(n),$('<div class="bottom-line full-width">').appendTo(n)),n},e.findView=function(e,t){return _.find(t,function(t){return t.model===e?!0:!1})},e}()}),window.require.register("utility/brackets/match-pruner",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.prune=function(e,t){var n,r,i,s,o,u,a,f,l,c;o=[];for(u=0,f=e.length;u<f;u++){n=e[u],r=!0,c=n.teams();for(a=0,l=c.length;a<l;a++)s=c[a],parseInt(s.get("seed"))>t&&(r=!1);r?o.push(n):(i=n.get("parent"),i.set("children",_.filter(i.get("children"),function(e){return e!==n})))}return o},e}()}),window.require.register("utility/brackets/root-finder",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.find=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++){t=e[n];if(t.get("parent")==null)return t}},e.findLoserRoot=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++){t=e[n];if(t.get("parent")==null)return t.get("children")[1]}},e.findWinnerRoot=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++){t=e[n];if(t.get("parent")==null)return t.get("children")[0]}},e}.call(this)}),window.require.register("utility/brackets/rounds-from-match-list",function(e,t,n){var r;n.exports=r=function(){function e(){}return e.convert=function(t){var n;return n=[],t!=null&&e.rec(t,0,n),n.reverse()},e.rec=function(t,n,r){var i,s,o,u;r[n]==null&&(r[n]=[]),r[n].push(t),u=[];for(i=s=0,o=t.get("children").length;0<=o?s<o:s>o;i=0<=o?++s:--s)t.get("children")[i]!=null&&u.push(e.rec(t.get("children")[i],n+1,r));return u},e}.call(this)}),window.require.register("utility/brackets/tree-view-formatter",function(e,t,n){var r,i,s;r=t("utility/brackets/root-finder"),i=t("utility/brackets/rounds-from-match-list"),n.exports=s=function(){function e(){}return e.format=function(e,t,n){var r,s,o,u,a,f,l,c,h;return s=e.get("children")[1],l=e.get("children")[0],e.get("children")[1].get("hasLoserSlot")?(o=i.convert(s),c=i.convert(l),r=this.singleTree(o,t,n),h=r.x/(c.length-1),f=this.singleTree(c,h,n),this.addOffset(s,0,f.y+n+20),a=_.clone(e.get("transform2d")),a.x=f.x+h,a.y=this.between(l,s),e.set("transform2d",a)):(u=i.convert(e),this.singleTree(u,t,n))},e.singleTree=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;u=0,o={x:0,y:0};for(i=f=0,m=e.length;0<=m?f<m:f>m;i=0<=m?++f:--f)e[i].length>e[u].length&&(u=i);for(i=l=u,g=e.length;u<=g?l<g:l>g;i=u<=g?++l:--l)for(s=c=0,y=e[i].length;0<=y?c<y:c>y;s=0<=y?++c:--c){a={x:i*t,y:0};if(i===u)a.y=s*n;else if(((b=e[i][s].get("children"))!=null?b.length:void 0)>0){w=e[i][s].get("children");for(h=0,p=w.length;h<p;h++)r=w[h],r!=null&&(a.y+=r.get("transform2d").y);a.y/=e[i][s].get("children").length}e[i][s].set("transform2d",a),o.x=Math.max(a.x,o.x),o.y=Math.max(a.y,o.y)}for(i=d=u;u<=0?d<0:d>0;i=u<=0?++d:--d)for(s=v=0,E=e[i-1].length;0<=E?v<E:v>E;s=0<=E?++v:--v)a={x:(i-1)*t,y:e[i-1][s].get("parent").get("transform2d").y},e[i-1][s].set("transform2d",a);return o},e.between=function(e,t){var n;return n=(e.get("transform2d").y+t.get("transform2d").y)/2},e.addOffset=function(t,n,r){var i,s,o,u,a,f;n==null&&(n=0),r==null&&(r=0),s=_.clone(t.get("transform2d")),s.x+=n,s.y+=r,t.set("transform2d",s),a=t.get("children"),f=[];for(o=0,u=a.length;o<u;o++)i=a[o],f.push(e.addOffset(i,n,r));return f},e}.call(this)}),window.require.register("views/bracket-editor-view",function(e,t,n){var r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("views/base/view"),s=t("models/base/collection"),i=t("views/brackets/bracket-view"),u=t("mediator"),n.exports=r=function(e){function t(){return this.saveTitle=a(this.saveTitle,this),this.editTitle=a(this.editTitle,this),this.deselect=a(this.deselect,this),this.saveBracket=a(this.saveBracket,this),t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.initialize=function(e){return t.__super__.initialize.call(this,e),this.model.url=function(){return"http://test.ign.com:2121/brackets/v6/api/"},u.subscribe("save-bracket",this.saveBracket),this.delegate("click",".match",function(e){return this.clickMatch(e)}),this.delegate("click",".hotzone",function(){return this.deselect()}),this.delegate("click",".bracket-title",function(e){return this.editTitle(e)}),this.delegate("blur",".bracket-title-input",function(e){return this.saveTitle(e)}),this.selected=[]},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),$('<div class="hotzone">').appendTo(this.$el).width(this.$el.width()).height(this.$el.height()),$('<input type="text" class="bracket-title-input">').appendTo(this.$(".label-layer span.bracket-title")),this},t.prototype.saveBracket=function(){return this.model.save(null,{xhrFields:{withCredentials:!0}})},t.prototype.clickMatch=function(e){return e.shiftKey!==!0&&this.deselect(),$(e.currentTarget).addClass("activeSelect"),this.selected.push($(e.currentTarget).data("match")),u.publish("change:selected",this.selected)},t.prototype.deselect=function(){return $(".match.activeSelect").removeClass("activeSelect"),this.selected=[]},t.prototype.editTitle=function(e){return $(e.currentTarget).addClass("editing"),$(e.currentTarget).find("input").focus().val(this.model.get("title"))},t.prototype.saveTitle=function(e){var t;return $(e.currentTarget).parent("span").removeClass("editing"),t=String($(e.currentTarget).val().trim()),this.model.set("title",t),this.model.set("slug",t.toLowerCase().replace(/\ /g,"-")),this.$(".bracket-title h1").text(this.model.get("title")),u.publish("save-bracket")},t}(i)}),window.require.register("views/brackets/bracket-view",function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p={}.hasOwnProperty,d=function(e,t){function r(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};c=t("views/base/view"),h=t("views/templates/brackets/bracket"),u=t("views/brackets/match-view"),o=t("views/brackets/group-view"),f=t("utility/brackets/root-finder"),l=t("utility/brackets/rounds-from-match-list"),s=t("utility/brackets/tree-view-formatter"),a=t("utility/brackets/bracket-padding"),i=t("utility/brackets/match-connector"),n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.template=h,t.prototype.container="#bracket-container",t.prototype.id="bracket-layer",t.prototype.autoRender=!0,t.prototype.initialize=function(e,n){var r=this;return n==null&&(n={top:200,right:400,bottom:200,left:100}),t.__super__.initialize.call(this,e),this.listenTo(this.model.get("matches"),"reset",function(){return r.renderCount=0,r.render()}),this.listenTo(this.model.get("groups"),"add",function(){return r.render()}),a.match.width=180,a.match.height=60,this.padding=n,this.renderCount=0},t.prototype.render=function(){var e,n,r,l,c,h,p,d,v,m,g,y,b,w,E,S,x;t.__super__.render.apply(this,arguments),h=this.model.get("matches"),n=this.model.get("groups"),d=f.find(h.models),c=[];if(d==null)return this;this.renderCount<1&&(s.format(d,a.match.width,a.match.height),a.setBracket(this.model,this.$el),a.setPadding(this.padding)),E=h.models;for(v=0,y=E.length;v<y;v++)l=E[v],p=new u({model:l}),p.$el.data("match",p.model),p.$el.appendTo(this.$el.find(".match-layer")),c.push(p);S=n.models;for(m=0,b=S.length;m<b;m++)e=S[m],r=new o({model:e}),r.$el.data("group",r.model),r.$el.appendTo(this.$el.find(".match-layer"));a.updateBounds(),this.$("span.bracket-title h1").text(this.model.get("title")),this.$("span.bracket-title").css({position:"absolute",top:a.padding.top-70,left:a.padding.left}),x=h.models;for(g=0,w=x.length;g<w;g++)l=x[g],l.get("children").length>0&&i.connect(l,c).appendTo(this.$el.find(".line-layer"));return++this.renderCount},t,t}(c)}),window.require.register("views/brackets/group-view",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("views/base/view"),s=t("views/templates/brackets/group-stage"),n.exports=r=function(e){function t(){return this.updatePosition=o(this.updatePosition,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.template=s,t.prototype.autoRender=!0,t.prototype.className="group",t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.model.on("change:transform2d",this.updatePosition),this.listenTo(this.model.get("teams"),"add remove",this.render),this.listenTo(this.model.get("matches"),"add remove",this.render)},t.prototype.updatePosition=function(){var e;return e=this.model.get("transform2d"),this.$el.css({top:e.y+e.paddingY,left:e.x+e.paddingX})},t.prototype.render=function(){var e,n,r,i,s;t.__super__.render.apply(this,arguments),e={},e.title=this.model.get("title"),e.matches=function(){var e,t;e=this.model.get("matches").models,t=[];for(n in e)r=e[n],t.push(parseInt(n)+1);return t}.call(this),e.teams=this.model.get("teams").map(function(e){return e.get("name")}),this.$el.html(this.template(e)),i=this.model.get("matches"),s=i.models;for(n in s)r=s[n],this.$(".match").eq(n).data("match",r);return this},t}(i)}),window.require.register("views/brackets/match-view",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("views/base/view"),s=t("views/templates/brackets/match"),n.exports=r=function(e){function t(){return this.updatePosition=o(this.updatePosition,this),this.changeTeams=o(this.changeTeams,this),t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.template=s,t.prototype.autoRender=!0,t.prototype.className="match",t.prototype.initialize=function(){var e=this;return t.__super__.initialize.apply(this,arguments),this.model.on("change:transform2d",this.updatePosition),this.listenTo(this.model.matchup(),"change:teams",function(){return e.changeTeams()}),this.changeTeams()},t.prototype.render=function(){var e,n,r;return t.__super__.render.apply(this,arguments),r=function(){var t,r,i,s;i=this.model.teams(),s=[];for(t=0,r=i.length;t<r;t++)e=i[t],n={},n.name=e!=null&&e.get("name")!=="TBD"?e.get("name"):"",n.points=e!=null&&e.get("name")!=="TBD"?e.get("points"):"",s.push(n);return s}.call(this),this.$el.html(this.template({teams:r})),this.updatePosition(),this},t.prototype.changeTeams=function(){var e,t,n,r,i=this;this.stopListening(),this.listenTo(this.model.get("event").get("matchup"),"change:teams",function(){return i.changeTeams()}),r=this.model.teams();for(t=0,n=r.length;t<n;t++)e=r[t],e!=null&&this.listenTo(e,"change",function(){return i.render()});return this.render()},t.prototype.updatePosition=function(){var e;return e=this.model.get("transform2d"),this.$el.css({top:e.y+e.paddingY,left:e.x+e.paddingX})},t}(i)})